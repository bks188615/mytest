<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../layui/css/layui.css">
    <title>Document</title>
    <style>
         ::-webkit-scrollbar-thumb {
            border-radius: 5px;
            -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            background: rgba(0, 0, 0, 0.2);
        }
        
         ::-webkit-scrollbar {
            width: 0px;
            height: 0px;
        }
        
         ::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            border-radius: 0;
            background: rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
        }
        
        html,
        body {
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        
        .star {
            color: #f00;
            font-size: 16px;
            font-weight: 700;
            margin: 0 10px;
        }
        
        .main {
            margin-top: 50px;
        }
        
        #formBox {
            margin: 0 15%;
        }
        
        #formBox .layui-form {
            display: grid;
            grid-template-columns: repeat(3, 33.33%);
        }
        
        #formBox .layui-form .layui-form-label {
            width: 100px;
        }
        
        #formBox .layui-form .layui-input-block {
            margin-left: 130px;
        }
        
        #toolBar {
            margin: 10px 20px 0 20px;
            height: 50px;
            line-height: 50px;
            background-color: #eee;
        }
        
        #toolBar li {
            float: right;
            margin: 0 10px;
        }
        
        #tableBox {
            margin: 0 20px;
        }
        
        #addNewdata {
            padding: 15px;
        }
        
        #addNewdata .layui-form .layui-form-item {
            display: grid;
            grid-template-columns: repeat(2, 50%);
        }
        
        #addNewdata .layui-form .layui-form-item .layui-form-label {
            width: 130px;
        }
        
        #addNewdata .layui-form .layui-form-item .layui-input-block {
            margin-left: 160px;
        }
    </style>
</head>

<body>
    <div class="main">
        <div id="formBox">
            <form class="layui-form" action="" lay-filter="searchForm">
                <div class="layui-form-item">
                    <label class="layui-form-label">行政区县</label>
                    <div class="layui-input-block">
                        <select name="city1">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">政策依据</label>
                    <div class="layui-input-block">
                        <select name="city2">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">地块类型</label>
                    <div class="layui-input-block">
                        <select name="city3">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">行业类别</label>
                    <div class="layui-input-block">
                        <select name="city4">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">是否超标</label>
                    <div class="layui-input-block">
                        <select name="city5">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">移除阶段</label>
                    <div class="layui-input-block">
                        <select name="city6">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">是否移除</label>
                    <div class="layui-input-block">
                        <select name="city7">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">地块名称或编码</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" placeholder="请输入标题" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input class="layui-btn" name="sss" lay-submit lay-filter="formDemo" value="搜索">
                    </div>
                </div>
            </form>
        </div>
        <ul id="toolBar">
            <li>
                <button class="layui-btn layui-btn-normal layui-btn-sm" lay-active="completeInfo">完善信息</button>
            </li>
            <li>
                <button class="layui-btn layui-btn-normal layui-btn-sm" lay-active="allocation">分配账号</button>
            </li>
            <li>
                <button class="layui-btn layui-btn-normal layui-btn-sm" lay-active="add">新增</button>
            </li>
        </ul>
        <div id="tableBox">
            <table id="mainTable"></table>
        </div>
    </div>
    <div id="addNewdata">
        <form class="layui-form" action="" lay-filter="addNewForm">
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label"><i class="star">*</i>地块名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="filed1" lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label"><i class="star">*</i>行业归属</label>
                    <div class="layui-input-block">
                        <select name="filed2" lay-verify="required">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label"><i class="star">*</i>行业类别</label>
                    <div class="layui-input-block">
                        <select name="filed3" lay-verify="required">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label"><i class="star">*</i>地块类型</label>
                    <div class="layui-input-block">
                        <select name="filed4" lay-verify="required">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div style="grid-column-start: 1;grid-column-end: 3;">
                    <label class="layui-form-label"><i class="star">*</i>政策依据</label>
                    <div class="layui-input-block">
                        <select name="filed5" lay-verify="required">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                    <div class="layui-input-block">
                        <input type="checkbox" name="like[write]" title="写作">
                        <input type="checkbox" name="like[read]" title="阅读" checked>
                        <input type="checkbox" name="like[dai]" title="发呆">
                        <input type="checkbox" name="like[dai1]" title="发呆">
                        <input type="checkbox" name="like[dai2]" title="发呆">
                        <input type="checkbox" name="like[dai3]" title="发呆">
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div>
                    <label class="layui-form-label"><i class="star">*</i>涉及的专项工作</label>
                    <div class="layui-input-block">
                        <select name="filed6" lay-verify="required">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div>
                    <label class="layui-form-label"><i class="star">*</i>涉及的重点区域</label>
                    <div class="layui-input-block">
                        <select name="filed7" lay-verify="required">
                          <option value=""></option>
                          <option value="0">北京</option>
                          <option value="1">上海</option>
                          <option value="2">广州</option>
                          <option value="3">深圳</option>
                          <option value="4">杭州</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <div class="layui-inline" style="grid-column-start: 1;grid-column-end: 3;">
                    <label class="layui-form-label">备注</label>
                    <div class="layui-input-block">
                        <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo">新增</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
                <div class="layui-input-block">
                    <input class="layui-btn layui-btn-normal" lay-active="chose1" value="选择地块"></input>
                </div>
            </div>
        </form>
    </div>
    <div id="chose">
        <table id="choseTable"></table>
    </div>
    <script type="text/html" id="titleTpl">
        <button class="layui-btn layui-btn-normal layui-btn-xs" lay-event="detail">查看</button>
    </script>
    <script src="../layui/layui.js"></script>
    <script>
        layui.use(["form", "table", "layer", "util", "jquery"], function() {
            let table = layui.table,
                form = layui.form,
                $ = layui.jquery,
                util = layui.util,
                layer = layui.layer;
            const tableData = [{
                filed1: "韶关市DH0112号-C地块（钛白粉厂三旧改造项目）",
                filed2: "4402042320006",
                filed3: "浈江区",
                filed4: "常用有色金属冶炼",
                filed5: "《污染地块土壤环境管理办法》、《土壤污染防治法》和《工矿用地土壤环境管理办法》",
                filed6: "《土壤污染防治法》第59条第二款,《土壤污染防治法》第59条第一款,《污染地块土壤环境管理办法》",
                filed7: "关闭搬迁企业地块",
                filed8: "2018-11-19",
                filed9: "超标",
                filed10: "修复效果评估",
                filed11: "待填报",
                filed12: "否",
                filed13: "-",
            }]

            table.render({
                elem: "#mainTable",
                height: "full-310",
                //url: '/demo/table/user/',
                id: "mainTable",
                page: true,
                data: tableData,
                even: true,
                cols: [
                    [ //表头
                        {
                            type: 'checkbox',
                        }, {
                            type: 'numbers',
                            title: '序号',
                        }, {
                            field: 'filed1',
                            title: '地块名称',
                            align: "center"
                        }, {
                            field: 'filed2',
                            title: '地块编码',
                            width: 150,
                            align: "center"
                        }, {
                            field: 'filed3',
                            title: '区县',
                            width: 80,
                            align: "center"
                        }, {
                            field: 'filed4',
                            title: '行业类别',
                            align: "center"
                        }, {
                            field: 'filed5',
                            title: '政策依据',
                            align: "center"
                        }, {
                            field: 'filed6',
                            title: '政策依据条款',
                            align: "center"
                        }, {
                            field: 'filed7',
                            title: '地块类型',
                            align: "center"
                        }, {
                            field: 'filed8',
                            title: '创建地块时间',
                            width: 120,
                            align: "center"
                        }, {
                            field: 'filed9',
                            title: '是否超标',
                            width: 100,
                            align: "center"
                        }, {
                            field: 'filed10',
                            title: '所处阶段',
                            align: "center"
                        }, {
                            field: 'filed11',
                            title: '阶段内状态',
                            width: 100,
                            align: "center"
                        }, {
                            field: 'filed12',
                            title: '是否已移出',
                            width: 105,
                            align: "center"
                        }, {
                            field: 'filed13',
                            title: '移出阶段',
                            width: 135,
                            align: "center"
                        }, {
                            title: '操作',
                            width: 80,
                            templet: "#titleTpl",
                            align: "center"
                        }
                    ]
                ],
                done() {
                    table.on('tool(test)', function(obj) { //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
                        var data = obj.data; //获得当前行数据
                        var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
                        if (layEvent === 'detail') { //查看
                            //do somehing
                        }
                    });
                }
            });
            form.on("submit(formDemo)", function(data) {
                console.log(data.field);
                layer.msg(JSON.stringify(data.field))
                return false
            })
            util.event('lay-active', {
                add: function(othis) {
                    layer.open({
                        type: 1,
                        content: $("#addNewdata"),
                        area: ["900px", "650px"],
                        title: "新增地块",
                        success() {

                        },
                        yes(index) {
                            layer.close(index)
                        }
                    })
                },
                allocation: function(othis) {
                    var checkStatus = table.checkStatus('mainTable');
                    if (checkStatus.data.length < 1) {
                        layer.msg("至少选择一条数据")
                    } else {
                        console.log(checkStatus.data); //获取选中行的数据
                        layer.msg(JSON.stringify(checkStatus.data))
                    }
                },
                completeInfo: function(othis) {
                    alert('触发了事件3');
                },
                chose1() {
                    layer.open({
                        type: 1,
                        content: $("#chose"),
                        area: ["900px", "650px"],
                        title: "选择地块",
                        btn: ["确定"],
                        btnAlign: "c",
                        success() {
                            table.render({
                                elem: "#choseTable",
                                height: "full-10",
                                //url: '/demo/table/user/',
                                id: "choseTable",
                                page: true,
                                data: tableData,
                                even: true,
                                cols: [
                                    [ //表头
                                        {
                                            type: 'radio',
                                        }, {
                                            type: 'numbers',
                                            title: '序号',
                                        }, {
                                            field: 'filed1',
                                            title: '地块名称',
                                            align: "center"
                                        }, {
                                            field: 'filed2',
                                            title: '地块编码',
                                            width: 150,
                                            align: "center"
                                        }, {
                                            field: 'filed3',
                                            title: '区县',
                                            width: 80,
                                            align: "center"
                                        }, {
                                            field: 'filed4',
                                            title: '行业类别',
                                            align: "center"
                                        }, {
                                            field: 'filed7',
                                            title: '地块类型',
                                            align: "center"
                                        }
                                    ]
                                ]
                            });
                        },
                        yes(index) {
                            var checkStatus = table.checkStatus('choseTable');
                            console.log(checkStatus.data); //获取选中行的数据
                            layer.close(index);
                            form.val("addNewForm", checkStatus.data[0])
                        }
                    })
                }
            });
        })
    </script>
</body>

</html>